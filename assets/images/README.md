# 🖼️ 圖片優化工具使用教學

本目錄包含圖片優化腳本，可以自動壓縮圖片至適合網頁瀏覽的大小，同時保持清晰度並備份原始檔案。

## 📋 功能特色

- ✅ **自動備份原始檔案**至 `originals-backup/` 資料夾
- ✅ **智能調整尺寸**至最大 1920x1920px
- ✅ **優化檔案大小**，保持視覺品質
- ✅ **支援多種格式**: PNG, JPG, JPEG
- ✅ **雙模式處理**: 批次處理或指定檔案
- ✅ **詳細進度報告**，顯示檔案大小節省百分比

## 🚀 快速開始

### 使用方式

```bash
# 模式 1: 處理所有圖片檔案
./optimize-images.sh

# 模式 2: 只處理指定檔案
./optimize-images.sh 檔案名稱.png

# 模式 3: 處理多個指定檔案
./optimize-images.sh 檔案1.png 檔案2.jpg 檔案3.jpeg

# 模式 4: 使用萬用字元處理特定類型
./optimize-images.sh *.jpg
```

### 範例

```bash
# 優化單一檔案
./optimize-images.sh tcmclinic.png

# 優化多個檔案
./optimize-images.sh capybara_pig_mascots.png og-image.png

# 優化所有 PNG 檔案
./optimize-images.sh *.png
```

## ⚙️ 預設設定

| 參數 | 值 | 說明 |
|------|-----|------|
| 最大寬度 | 1920px | 超過此寬度會自動縮小 |
| 最大高度 | 1920px | 超過此高度會自動縮小 |
| JPEG 品質 | 85% | 平衡檔案大小與視覺品質 |
| 備份目錄 | `originals-backup/` | 原始檔案儲存位置 |

## 📊 預期效果

腳本會顯示每個檔案的處理結果：

```
處理 tcmclinic.png
  原始尺寸: 2816x1536, 8738KB
  ✓ 已備份到 originals-backup/tcmclinic.png
  ✓ 已調整尺寸
  ✓ 完成: 1920x1047, 3789KB (節省 4949KB, 56%)
```

## 🔧 技術細節

- 使用 macOS 內建的 `sips` 工具
- 無需安裝額外依賴套件
- 備份檔案只會建立一次（不會重複備份）
- 自動跳過已經夠小的圖片（< 500KB 且尺寸 ≤ 1920px）

## 🛡️ 安全性

- ✅ 所有原始檔案都會先備份再處理
- ✅ 如果備份已存在，不會覆蓋
- ✅ 檔案格式驗證，避免處理非圖片檔案
- ✅ 檔案存在性檢查

## 📁 目錄結構

```
assets/images/
├── optimize-images.sh          # 優化腳本
├── README.md                   # 本文件
├── originals-backup/           # 原始檔案備份目錄（自動建立）
│   ├── tcmclinic.png
│   └── ...
├── tcmclinic.png              # 優化後的圖片
└── ...
```

## 💡 最佳實踐

1. **首次使用前**，先確認腳本有執行權限：
   ```bash
   chmod +x optimize-images.sh
   ```

2. **大檔案優先**：先處理最大的檔案以節省最多空間
   ```bash
   ls -lhS *.png  # 列出 PNG 檔案，按大小排序
   ```

3. **批次處理前先測試**：先用單一檔案測試效果
   ```bash
   ./optimize-images.sh 測試檔案.png
   ```

4. **檢查備份**：確認原始檔案已正確備份
   ```bash
   ls -lh originals-backup/
   ```

## ❓ 常見問題

### Q: 如果我想調整壓縮品質怎麼辦？
A: 編輯腳本中的 `QUALITY=85` 參數（範圍 0-100）

### Q: 備份的檔案可以刪除嗎？
A: 建議保留備份，除非確定優化後的圖片完全符合需求

### Q: 腳本會修改原始檔案嗎？
A: 會。但修改前會先備份原始檔案到 `originals-backup/`

### Q: 支援哪些圖片格式？
A: 目前支援 PNG、JPG、JPEG（不區分大小寫）

### Q: 可以恢復原始檔案嗎？
A: 可以，從 `originals-backup/` 目錄中複製回來即可

## 🎯 使用建議

- **部落格文章配圖**：建議優化至 1920px 寬度
- **縮圖/預覽圖**：可手動調整 `MAX_WIDTH` 為 800-1200px
- **高解析度螢幕截圖**：保持預設 1920px 設定

---

**最後更新**: 2026-02-09  
**版本**: 1.0  
**相容系統**: macOS
